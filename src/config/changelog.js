// 更新日志配置文件 - 统一管理应用更新日志
// 修改这里的内容会自动同步到关于界面

const CHANGELOG_DATA = [
    {
        version: 'v1.3.3',
        date: '2025-12-04',
        items: [
            ' 全站搜索功能：实现从所有配置站点同时检索视频的功能',
            ' 实时搜索结果：逐个站点搜索，实时显示搜索结果',
            ' 搜索历史记录：支持搜索关键词的保存和快速检索',
            ' 视频来源标识：搜索结果显示视频来源站点',
            ' 智能站点切换：点击搜索结果自动切换到对应站点',
            ' 修复播放历史不记录问题：解决因页面元素冲突导致的功能失效',
            ' 修复历史记录跳转错误：点击播放历史时不再跳转到错误网站播放错误视频',
            ' 优化历史记录续播功能：点击历史记录时，会从上次观看的时间点继续播放',
            ' 增强历史记录关联：确保历史记录能正确关联到对应的网站',
            ' 优化历史记录存储：确保播放历史数据稳定保存',
            ' 提升应用性能：清理冗余调试信息，优化系统运行速度'
        ]
    },
    {
        version: 'v1.3.2',
        date: '2025-11-28',
        items: [
            ' 修复播放器控制栏自动隐藏问题：确保鼠标和控制栏在3秒无操作后自动隐藏',
            ' 统一全屏和窗口模式行为：无论是否全屏，控制栏都会在3秒后自动隐藏',
            ' 修复底部播放控制按钮隐藏问题：确保播放控制按钮和右上角功能按钮随控制栏一起隐藏和显示',
            ' 移除鼠标悬停检查：控制栏在3秒后无论鼠标位置如何都会隐藏',
            ' 优化CSS样式：确保控制栏所有子元素都能正确隐藏和显示',
            ' 新增站点拖拽排序功能：支持在设置页面拖动站点调整顺序',
            ' 修复站点拖拽排序问题：确保站点可以被拖动到其他位置',
            ' 同步更新站点下拉框：站点排序变更后，首页顶部站点下拉框自动更新'
        ]
    },
    {
        version: 'v1.3.1',
        date: '2025-08-21',
        items: [
            ' 选集面板改进：优化选集面板样式和交互逻辑，提升用户体验',
            ' 错误处理增强：完善视频错误处理和自动重试功能，提高播放稳定性',
            ' 开发脚本改进：优化开发脚本的错误处理和修复机制',
            ' 环境文件管理：更新.gitignore文件，添加本地开发环境文件和.trae/目录的忽略规则'
        ]
    },
    {
        version: 'v1.3.0',
        date: '2025-08-20',
        items: [
            ' 新增播放器与详情页面的当前播放集同步功能',
            ' 播放器切换集数时自动更新详情页面的选集状态',
            ' 详情页面可实时显示播放器当前播放的集数',
            ' 支持跨线路的集数同步，播放器切换线路时详情页自动跟随',
            ' 迁移至pnpm包管理器，提升依赖安装和管理效率',
            ' 优化版本同步机制，确保版本信息在所有配置文件中保持一致'
        ]
    },
    {
        version: 'v1.2.9',
        date: '2025-08-17',
        items: [
            ' 重大修复：DLNA投屏功能完全修复，现已支持云视听极光TV等设备',
            ' 修复投屏时URL为空的问题，增强主进程URL备份和传递机制',
            ' 修正DLNA控制URL解析逻辑，基于设备XML正确构建控制端点',
            ' 优化DLNA设备发现和服务解析，提高投屏连接成功率',
            ' 完善历史记录跨站点播放，支持自动切换到正确站点继续播放',
            ' 增强智能搜索功能，当原站点视频不存在时自动在其他站点搜索',
            ' 重构历史记录播放流程，彻底脱离对当前站点的依赖性',
            ' 优化历史记录数据结构，只保存站点API地址作为唯一标识',
            ' 改进错误处理和用户提示，移除多余的调试信息输出',
            ' 清理调试代码，优化应用性能和界面显示效果'
        ]
    },
    {
        version: 'v1.2.8',
        date: '2025-08-07',
        items: [
            ' 将检查更新功能移至侧边栏底部，更方便访问',
            ' 侧边栏常驻更新检查按钮，无需进入关于页面',
            ' 支持状态显示：检查中、已是最新、有更新、检查失败',
            ' 发现新版本时直接提供下载链接',
            ' 关于页面移除更新检查部分，界面更简洁',
            ' 重构更新检查代码，提高可维护性',
            ' 优化事件监听和状态管理，修复侧边栏布局和样式'
        ]
    },
    {
        version: 'v1.2.5',
        date: '2025-08-06',
        items: [
            ' 修复播放器置顶按钮重复触发的问题，确保每次点击只触发一次',
            ' 优化事件绑定机制，避免重复绑定导致的功能异常',
            ' 改进置顶状态提示，移除冗余提示只保留最终结果',
            ' 修复T键快捷键与置顶按钮状态不同步的问题',
            ' 清理项目多余的测试文件，保持项目结构简洁',
            ' 增强播放器稳定性和用户体验'
        ]
    },
    {
        version: 'v1.2.4',
        date: '2025-08-05',
        items: [
            ' 新增播放器分享按钮，播放时可随时分享当前剧集',
            ' 优化详情页分享按钮布局，移至标题行右上角节省空间',
            ' 简化剪切板检测逻辑，按Ctrl+V时智能判断分享内容',
            ' 改进分享按钮样式，采用紧凑型设计和统一主题色',
            ' 完善分享功能兼容性，播放器和详情页使用相同算法',
            ' 优化事件处理机制，增强用户交互体验'
        ]
    },
    {
        version: 'v1.2.3',
        date: '2025-08-04',
        items: [
            ' 新增播放器窗口置顶功能，保持播放器始终在最顶层',
            ' 新增投屏功能，支持将视频投屏到电视等大屏设备',
            ' 播放器界面新增置顶和投屏按钮，操作简单便捷',
            ' 投屏功能支持自动发现多种设备类型和协议',
            ' 支持按T键快速切换置顶状态',
            ' 移除冗余的功能说明文档，保持项目简洁'
        ]
    },
    {
        version: 'v1.2.2',
        date: '2025-08-04',
        items: [
            ' 修复编译图标问题，使用正确的.ico格式图标文件',
            ' 优化编译工具，推荐使用electron-packager避免代码签名问题',
            ' 更新编译脚本，新增npm run pack命令',
            ' 同步更新批处理文件和文档说明',
            ' 完善版本信息同步，更新所有相关文件',
            ' 改进编译输出路径和操作指南'
        ]
    },
    {
        version: 'v1.2.1',
        date: '2025-08-03',
        items: [
            ' 新增WIN11风格圆角窗口设计',
            ' 新增关于页面，展示软件详细信息',
            ' 新增Gitee仓库链接，支持外部浏览器打开',
            ' 优化自定义标题栏和窗口控制功能',
            ' 增强亚克力透明效果和视觉层次',
            ' 改进外部链接安全处理机制'
        ]
    },
    {
        version: 'v1.2.0',
        date: '2025-08-03',
        items: [
            ' 新增弹幕功能，支持实时弹幕和时间轴弹幕双模式',
            ' 新增悬停式弹幕输入，鼠标悬停播放器自动显示输入框',
            ' 新增多彩弹幕样式，支持7种颜色和3种大小',
            ' 新增智能弹幕房间，基于视频内容自动分配',
            ' 优化弹幕输入交互，解决与播放器操作的冲突',
            ' 修复播放历史存储问题，确保数据持久化保存'
        ]
    },
    {
        version: 'v1.1.0',
        date: '2025-08-03',
        items: [
            ' 新增线路别名功能，支持自定义线路显示名称',
            ' 新增线路屏蔽功能，可屏蔽指定播放线路',
            ' 新增配置导入导出功能，支持数据备份和迁移',
            ' 优化站点管理界面，美化UI交互体验',
            ' 修复屏蔽线路过滤逻辑，提高播放稳定性'
        ]
    }
];

// 生成更新日志HTML的函数
function generateChangelogHTML(maxVersions = 6) {
    const versions = CHANGELOG_DATA.slice(0, maxVersions);
    return versions.map(version => `
                                    <div class="changelog-item">
                                        <div class="version-tag">${version.version}</div>
                                        <div class="changelog-content">
                                            <h4>${version.date}</h4>
                                            <ul>
                                                ${version.items.map(item => `<li>${item}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>`).join('');
}

// 导出配置
if (typeof module !== 'undefined' && module.exports) {
    // Node.js 环境
    module.exports = {
        CHANGELOG_DATA,
        generateChangelogHTML
    };
} else {
    // 浏览器环境
    window.CHANGELOG_DATA = CHANGELOG_DATA;
    window.generateChangelogHTML = generateChangelogHTML;
}
